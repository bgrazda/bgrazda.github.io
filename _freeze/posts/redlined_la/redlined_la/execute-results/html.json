{
  "hash": "ac619cab46ce6dc1256be8d76630b6be",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Historical Redlining in Los Angeles County\"\nsubtitle: \"Exploring patterns of environmental justice\"\nauthor: \"Brooke Grazda\"\ndescription: 'Present-day environmental justice may reflect legacies of injustice in the past. The United States has a long history of racial segregation which is still visible.'\ndate: \"10-15-24\"\nimage: images/holc-la.jpg\ncategories: [R, geospatial, sf, tmap, EJ, biodiversity]\nexecute: \n  warning: false\n  message: false\n  eval: true\nformat:\n  html:\n    toc: true\neditor_options: \n  chunk_output_type: console\n---\n\n\n## Legacy of redlining in current environmental (in)justice\nPresent-day environmental justice may reflect legacies of injustice in the past. The United States has a long history of racial segregation which is still visible. During the 1930‚Äôs the Home Owners‚Äô Loan Corporation (HOLC), as part of the New Deal, rated neighborhoods based on their perceived safety for real estate investment. Their ranking system, (A (green), B (blue), C (yellow), D (red)) was then used to block access to loans for home ownership. Colloquially known as ‚Äúredlining‚Äù, this practice has had widely-documented consequences not only for community wealth, but also health.1 Redlined neighborhoods have less greenery2 and are hotter than other neighborhoods.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Display Code\"}\n# Read in packages\nlibrary(tidyverse)\nlibrary(janitor) \nlibrary(here)\nlibrary(sf)\nlibrary(tmap)\nlibrary(kableExtra)\nlibrary(patchwork)\nlibrary(testthat)\n```\n:::\n\n::: {.cell quiet='true'}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Display Code\"}\n# Conditional statement to check for coordinate reference systems\nif(st_crs(holc) == st_crs(ejscreen_LA) & st_crs(holc) == st_crs(ejscreen)) {\n  print(\"It's a match! Coordinate reference systems of datasets match. \")\n} else{\n  warning(\"Coordinate reference systems do not match. Please transform your data.\") \n} # STOP here if it does not match, go back and use st_transform()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"It's a match! Coordinate reference systems of datasets match. \"\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Display Code\"}\n# Layer shapes using bounding box visualizing LA County and its surrounding counties\ntmap_options(check.and.fix = TRUE)            # Fixes polygon options for map\n\ntm_shape(ejscreen_LA,                             # Using LA data, zoom in on areas graded by HOLC\n         bbox = holc) +\n  tm_polygons(col = 'moccasin') +                 # Choose map color for land area in LA\n   tm_shape(holc) +                               # Now we want to fill in the HOLC census data\n   tm_polygons(col = 'grade',\n              palette = c('A' = 'green4',                                    # Color each grade in order\n                          'B' = 'gold',\n                          'C' = 'darkorange',\n                          'D' = 'red4'),\n               title = \"Grades\") +                                    # Legend Title\n  tm_shape(san_bern) +\n  tm_polygons(col = 'moccasin') +                                    # San Bernardino to provide map context\n  tm_shape(orange_county) +\n  tm_polygons(col = 'moccasin') +                                    # Surrounding counties and filling color\n  tm_layout(frame = TRUE,\n            main.title = \"Historical Redlining in Los Angeles County\",\n            main.title.position = \"center\",                               #center the title\n            bg.color = \"lightblue\",                                    # ocean color as background\n            legend.position = c(\"left\", \"bottom\"),                        # want legend in bottom left\n            fontfamily = \"serif\",                                           # Select font\n             legend.title.size = 1) +                             \n  tm_scale_bar(position = c(.6, .9)) +         # position values tinkered to be in the top right corner\n  tm_compass(type = \"8star\",                                           # More detailed compass\n             position = c(.725, .8),               # Position 8 star compass below the scale bar\n             size = 2.4) \n```\n\n::: {.cell-output-display}\n![](redlined_la_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n### Percent of current census block groups within each HOLC grade\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Display Code\"}\n# Create a joined data frame that will be modified to create table and figures\nholc_la_join <- st_join(ejscreen_LA, holc, join = st_intersects)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Display Code\"}\n# Join datasets for census blocks, add the count of each grade group and divide by number of rows; keep grade and percent\npercent_holc <- holc_la_join |>              # Use joined data frame as base                       \n   group_by(grade) |>                         # Group data by grade as first step to calculating percent\n   summarise(count_block = n()) |>                              # Count each block that was grouped by grade\n  mutate(percent = (count_block/sum(count_block) * 100) ) |>    # calculate percentage by mutating a new column using our summarized count column\n  ungroup() |>                                     # Avoid errors with ungroup function\n   st_drop_geometry()                                     # drop geom for our table\n\n  \ntest_that(\"Test that the percentage adds to 100\", expect_true(sum(percent_holc$percent) == 100)) # Making sure that percents are correct before putting into table\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nTest passed ü•á\n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Display Code\"}\nkable(percent_holc, col.names = c(\"Grade\", \"Count\", \"Percent\")) # Create visual table for data frame we just created\n```\n\n::: {.cell-output-display}\n\n\n|Grade | Count|   Percent|\n|:-----|-----:|---------:|\n|A     |   449|  4.997218|\n|B     |  1239| 13.789649|\n|C     |  3058| 34.034502|\n|D     |  1346| 14.980523|\n|NA    |  2893| 32.198108|\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Display Code\"}\n# Join if st_intersects is true, so we make sure to look at values of overlapping geometrise\n low_income_join <- holc_la_join  |> \n   group_by(grade) |>  \n   summarise(mean_low_income = (mean(LOWINCPCT) * 100)) |>             \n  ungroup()\n\n# Plot data\nfig1 <- ggplot(low_income_join) +\n  geom_col(aes(x = grade, y = mean_low_income,\n               fill = grade)) +\n  labs(x = \"HOLC Grade\",\n       y = \"Average Percent Low Income (%)\",\n       title = \"Percent Low Income Within HOLC Grades\") +\n  theme_classic() +\n  theme(plot.caption = element_text(hjust = -0.15, size = 10, face = \"bold\"),\n        legend.position = 'None') +\n  scale_fill_manual(values = c('green4',\n                        'gold',\n                        'darkorange',\n                        'red4',\n                        'slategrey'))\n\nfig1\n```\n\n::: {.cell-output-display}\n![](redlined_la_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Display Code\"}\n# Create boxplot\nfig2 <- ggplot(holc_la_join, aes(x = grade,                          # original joined data frame, we want all the data for holc and ejscreen in LA \n                                 y = P_PM25)) +                                  # repeat y for stat summary\n  geom_boxplot(aes(x = grade,                                                 # x variable \n                   y = P_PM25,                                                # y variable\n                   fill = grade)) +                                           # color to be filled by grade \n  labs(x = \"HOLC Grade\",                                                      # HOLC on x label\n       y = \"Percentile\",                                                      # Percentile on y axis\n       title = \"Particulate Matter 2.5 Across HOLC Grades in Los Angeles County\") +                         # title label\n  theme_classic() +                                   # blank backghround\n  guides(fill = 'none') +                             # Remove our legend that shows diff colors for the individ box plots\n  scale_fill_manual(values = c('green2',               # We want colors to align with our maps colors in the order A, B, C, D, NA\n                        'gold3',\n                        'darkorange2',\n                        'red3',\n                        'slategrey')) +                     \n  stat_summary(fun = mean,                             # calculates mean function of y based on x\n               aes(shape = \"Mean Percentile\"),          # Label the shape to match up with the scale shape manual\n               geom = 'point',                                      # We want the geometry to align with the scale shape manual below \n               col = \"black\",                                    # define color = black\n               size = 5.5) +                                              # standout size to make dot bigger than outlier dots \n  scale_shape_manual(values=c(\"Mean Percentile\" = 20),                     # Define mean percentile as dot shape number by using arguemnt values\n                     guide = guide_legend(' '))                          # Remove shape title\n\n\n# Figure 3: Percentile for low life expectancy\n\nfig3 <- ggplot(holc_la_join, aes(x = grade,             \n                                 y = P_LIFEEXPPCT)) +                    # Must define aes here for stat summary at the bottom as well as in geom\n  geom_boxplot(aes(x = grade,                                             # grade in LA County\n                   y = P_LIFEEXPPCT,                                        # Percentile Life Expectancy\n                   fill = grade)) +                                         # Change colors of box plot depending on grade, consistent w/ other figs\n  labs(x = \"HOLC Grade\",                                                      # Relabel x Axis to Home Owner's Loan Corporation(HOLC) grade\n       y = \"Percentile\",                                                      # Relabel axes title so we are looking at percentile\n       title = \"Low Life Expectancy Across HOLC Grades in Los Angeles County\") +   # Define explicit title\n  theme_classic() +                                                         # No tick marks, just blank page theme\n  scale_fill_manual(values = c('green2',                                      # Green representing A grade\n                        'gold3',                                     # yellow representing B grade\n                        'darkorange2',                                     # orange representing C grade\n                        'red3',                                         # red representing grade = D\n                        'lightgrey'))  +                                  # Grey color NA\n  guides(fill = 'none') +                                          # Remove legend above for HOLC grades box plots, intuitive so no need\n  stat_summary(fun = mean,                                        # We want the function to evaluate the mean out of each grade, defined by x\n               aes(shape = \"Mean Percentile\"),                                      # Assign the label that will show up in manual legend\n               geom = 'point',                                            # We want the mean to be visualized as a standout point  \n               col = \"black\",                                              # Black dot to represent mean percemtile, consistent with PM 2.5\n               size = 5.5) +                                           # Adjust size of the point\n  scale_shape_manual(values=c(\"Mean Percentile\" = 20),                  # Mean Percentile assigned to point value which is 20\n                     guide = guide_legend(' '))                        # remove shape title\n\n\n# Use patchwork to see both figs stacked\nfig2 / fig3\n```\n\n::: {.cell-output-display}\n![](redlined_la_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nReflecting on these results, it is noted that there are many missing or NA values that were omitted from the HOLC grade data. These missing values had an average percent low income of about 27.3%. Areas that were graded an A by HOLC had a percent low income of about 15%, which differs significantly with the D graded areas with a percent low income of 39.2%. This places the missing data (making up about 43% of the total 2021 EJScreen LA data) between the highest and lowest grades possible by HOLC. Likewise, these communities are not historically redlined, however may not be necessarily at a strong advantage either. \n\nThere is a cascading effect on increasing socioeconomic constraints and negative health effects as the grade decreases. Because of this historical redlining, disadvantaged communities have less available medical resources and closer proximity to hazardous polluting facilities, contributing to the greater levels of air pollutants and low life expectancy. \n\nLooking at the values that were recorded by the Home Owner's Loan Corporation Grades in the 1930s, about 20% of the overall measured data was in the D range. Unsurprisingly, census tracts that were given a D grade had the highest averages of percent low income, percentile of particulate matter 2.5, and percentile of low life expectancy. Furthermore, these adverse health effects are linked to the historical redlining of marginalized residents, a form of institutionalized racism whose effect is proven in the 2021 EJScreen data. \n\n\n## Legacy of redlining in biodiversity observations\nA recent study found that redlining has not only affected the environments communities are exposed to, it has also shaped our observations of biodiversity.4 Community or citizen science, whereby individuals share observations of species, is generating an enormous volume of data. Ellis-Soto and co-authors found that redlined neighborhoods remain the most undersampled areas across 195 US cities. This gap is highly concerning, because conservation decisions are made based on these data.\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Display Code\"}\nif(expect_true(st_crs(birds) == st_crs(holc))) {\n  print(\"It's a match! Coordinate reference systems of datsets match. \")\n} else{\n  warning(\"Coordinate reference systems do not match. Please transform your data.\") \n}\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"It's a match! Coordinate reference systems of datsets match. \"\n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Display Code\"}\n# Join DF\nbird_holc_join <- st_join(holc, birds, st_intersects) |> \n  filter(grade != 'NA') |> \n  group_by(grade) |> \n  summarise(bird_count= n()) |> \n  mutate(percent_obs = (bird_count/sum(bird_count) * 100)) |>                 # Mutate new colummn \n  st_drop_geometry() |>                                     \n  ungroup()                                     # Avoid further errors if we wanted to perform more functions\n\n# Test function to make sure that the bird observation percentages are TRUE\ntest_that(\"Test that the percentage of bird observations add to 100.\", expect_true(sum(bird_holc_join$percent_obs) == 100)) \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nTest passed üéä\n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Display Code\"}\n# Plot data!\nggplot(bird_holc_join, aes(x = grade, y = percent_obs)) +\n  geom_col(fill = c('green4',\n                        'gold',\n                        'darkorange',\n                        'red4')) +\n  labs(title = 'Percent of Bird Observations by LA HOLC Grades in 2022',      # Title \n       x = 'HOLC Grade',                                    # holc grade on x\n       y = 'Percent of Observations') +                         \n  theme_classic()                                           # Blank background for sleekness\n```\n\n::: {.cell-output-display}\n![](redlined_la_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nLooking at the bird data, the bar plot shows that the highest percentage of bird observations is found  in the C graded areas. The second highest percentage of bird observations is found in the D graded areas, which does not match with the findings in Ellis-Soto et al. 2023. The highest number of observations were found in both areas of HOLC grades C and D. Ellis-Soto and co authors found that these redlined areas were the most undersampled, and while this may still be true, the biodiversity data based on bird observations is not true. However, the concerns for undersampled areas influencing conservation decisions remain important to the conversation of adverse impacts as a result of historical redlining. Environmental injustices as such create additional barriers to biodiversity access, and it should be considered that there may bias as to how this biodiversity data was collected in redlined areas. For example, the Biden Administration has authorized federal and state governments to focus on historically neglected areas to increase conservation efforts, potentially could have influenced the greater amount of bird observations in 2022 within these redlined areas. \n\n**Citations:**\n\nEllis-Soto, D., Chapman, M., & Locke, D. H. (2023). Historical redlining is associated with increasing geographical disparities in bird biodiversity sampling in the United States. Nature Human Behaviour.\n\nFederal Loan Agency. Federal Home Loan Bank Board. Home Owners' Loan Corporation. (07/01/1939 - 02/24/1942).\n\nU.S. Environmental Protection Agency (EPA), 2023. EJScreen Technical Documentation.\n\nGlobal Biodiversity Information Facility (GBIF). Biodiversity Data. ",
    "supporting": [
      "redlined_la_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}